/*
 * generated by Xtext 2.30.0
 */
package interactive.validation;

import org.eclipse.emf.common.util.EList;
import org.eclipse.xtext.validation.Check;

import interactive.fictiondsl.Announce;
import interactive.fictiondsl.FictiondslPackage;
import interactive.fictiondsl.Scenario;
import interactive.fictiondsl.Story;

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
public class FictiondslValidator extends AbstractFictiondslValidator {
	
	public static final String INVALID_NAME = "invalidName";

	@Check 
	public void checkUniqueName(Announce announce) {
		if (Character.isLowerCase(announce.getName().charAt(0))) {
			warning("Name should start with lower case",
					FictiondslPackage.Literals.ANNOUNCE__EXP,
					INVALID_NAME);
		}
	}
	 @Check
	    public void checkScenarioNames(Story story) {
	        EList<Scenario> scenarios = story.getScenario();
	        for (int i = 0; i < scenarios.size(); i++) {
	            for (int j = i + 1; j < scenarios.size(); j++) {
	                Scenario scenario1 = scenarios.get(i);
	                Scenario scenario2 = scenarios.get(j);
	                if (scenario1.getName().equals(scenario2.getName())) {
	                    error("Scenario with name " + scenario1.getName() + " already exists",
	                            FictiondslPackage.Literals.STORY__SCENARIO, i);
	                    error("Scenario with name " + scenario2.getName() + " already exists",
	                            FictiondslPackage.Literals.STORY__SCENARIO, j);
	                }
	            }
	        }
	    }
	 
}
